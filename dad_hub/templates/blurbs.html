{% extends 'base.html' %}
{% block content %}
<h1> My Hub </h1>

<form action="{% url 'blurb_create' %}" method="post">
    {% csrf_token %}
    <input
        class="input"
        type="hidden"
        name="{{user}}"
        required=""
    />
    <textarea
        class="input"
        type="text"
        rows="4"
        cols="50"
        name="content"
        placeholder="Start a conversation..."
        required=""
    ></textarea>
    <input
    class="input"
    type="text"
    name="image"
    placeholder="add an image"
    />
    <input
    class="input"
    type="text"
    name="link" 
    placeholder="add a link"
    />
    <input
        class="input"
        type="text"
        name="tags"
        placeholder="tags"
        multiple>

    <input
        class="button is-primary" 
        type="submit" 
        value="Add Blurb"
    />
</form>

{% for blurb in blurbs %}
<div class="blurbcontainer">
    
    <p><strong>{{blurb.user}}</strong></p>
    <p>{{blurb.content}}</p>
    {% if blurb.link != "" %}
        <img src="{{blurb.image}}" />
    {% endif %}
    {% if blurb.link != ""%}
        <p>Link:</p>
        <a href="{{blurb.link}}">{{blurb.link}}</a>
    {% endif %}
    <p>tags:</p>
    {% for tag in blurb.tags %}
    <p>{{tag}}</p>
    {% endfor %}

    {% if user == blurb.user %}
    <a href="/{{blurb.id}}/delete" class="button is-danger">Delete</a>
    {% endif %}
    <a href="/blurbs/{{blurb.id}}">See More</a>
    <div class="responsesection">

        <h3>Responses</h3>
        
        {% for response in responses %}
        {% if response.blurb_id == blurb.id%}
        <div class="responselist">
            <div class="responsecontainer">
                <p><strong>{{response.user}}</strong></p>
                <p>{{response.content}}</p>
            </div>
        </div>
            {% endif %}
            {% endfor %}
            
        

    </div>

</div>
{% endfor %}
{% endblock %}